<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSMANLI TÃœRKÃ‡ESÄ° HARF PEKÄ°ÅTÄ°RME ETKÄ°NLÄ°ÄÄ°</title>
    <style>
        /* Evolventa Fontunu Harici Kaynaktan (CDN) Ekleme */
        @import url('https://fonts.cdnfonts.com/css/evolventa');

        /* CSS BaÅŸlangÄ±cÄ± */
        body {
            /* TÃœM YAZILAR EVOLVENTA */
            font-family: 'Evolventa', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        .container {
            /* Sayfa Boyutu */
            width: 950px; 
            background-color: white;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .header-box {
            width: 100%;
            /* BAÅLIK GRADIENT: AÃ§Ä±ktan koyuya */
            background: linear-gradient(to right, #6B8E23, #4B5320); 
            color: white;
            text-align: center;
            padding: 20px 0; 
            margin-bottom: 20px;
        }

        h1 {
            font-size: 24px; /* Ana BaÅŸlÄ±k Font Size */
            margin: 0;
        }

        h2 {
            font-size: 18px; /* Alt BaÅŸlÄ±k Font Size */
            margin: 5px 0 0 0;
            font-weight: normal;
        }

        /* PUAN VE SÃœRE Ã‡UBUÄU */
        .info-bar-container {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            gap: 20px; 
        }
        
        .info-box {
            flex: 1; 
            padding: 10px 15px;
            font-size: 16px; 
            color: white; 
            border-radius: 5px; 
            text-align: center;
            background: linear-gradient(to right, #38761D, #6AA84F); 
        }

        .quiz-area {
            text-align: center;
            font-size: 16px;
            /* YÃ¼ksekliÄŸi belirledik ve iÃ§eriÄŸi dikeyde ortalamak iÃ§in Flexbox kullandÄ±k */
            min-height: 350px; 
            display: flex;
            flex-direction: column;
            justify-content: center; 
            align-items: center;
        }

        /* BaÅŸlangÄ±Ã§ta gizli tutulacak alan, sadece ortalama iÃ§in flex'i kullanÄ±r */
        .quiz-area:not(#start-screen) {
             display: none; 
        }

        /* Harf gÃ¶sterimi, ortalama yapÄ±lÄ±rken Ã§akÄ±ÅŸmamasÄ± iÃ§in Flexbox'Ä±n dÄ±ÅŸÄ±nda konumlandÄ±rÄ±ldÄ± */
        .harf-display {
            height: 250px; 
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            margin-bottom: 30px; 
            position: relative;
            padding-top: 5px; 
        }
        
        /* HARF Ä°Ã‡Ä°N GERÄ° SAYIM KUTUSU (BROWSER) */
        #harf-countdown-box {
            position: absolute; 
            top: 0; 
            padding: 5px 15px;
            border-radius: 5px;
            color: white; 
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(to right, #4B5320, #6B8E23); 
            transition: opacity 0.3s;
        }

        #current-harf {
            font-size: 150px; 
            position: absolute;
            top: 50%; 
            left: 50%;
            transform: translate(-50%, -20%); 
            transition: opacity 1s ease-out, transform 1s ease-out;
            opacity: 1;
        }
        
        /* Harf Kaybolma Animasyonu (Fade-out) */
        .fade-out {
            opacity: 0 !important;
            transform: translate(-50%, -80px) scale(1.5) !important;
        }

        .choices {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin-top: 10px; 
        }

        .choice-button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            margin: 5px;
            border: none;
            cursor: pointer;
            font-size: 16px; 
            width: 150px;
            transition: background-color 0.3s;
            font-family: 'Evolventa', sans-serif;
            text-align: left; 
        }

        .choice-button:hover {
            background-color: #45a049;
        }

        .choice-letter {
            font-weight: bold;
        }

        /* Geri bildirim stilleri */
        #feedback {
            font-size: 20px;
            display: flex;
            flex-direction: column; 
            align-items: center;
            justify-content: center;
            gap: 10px;
            min-height: 80px; 
            margin-top: 15px; 
        }
        
        /* YENÄ°DEN DENE ve BAÅLAT Buton Stili */
        .start-button, .restart-button {
            background-color: #4B5320; 
            color: white;
            padding: 15px 30px;
            margin-top: 20px; 
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 20px;
            font-weight: bold;
            transition: background-color 0.3s;
            font-family: 'Evolventa', sans-serif;
        }

        .start-button:hover, .restart-button:hover {
            background-color: #6B8E23;
        }

        .feedback-text {
            font-weight: bold;
        }

        .correct-text {
            color: green;
        }

        .wrong-text {
            color: red;
        }

        .icon {
            font-size: 24px;
            line-height: 1; 
        }

        /* Oyun Sonu Skor EkranÄ± iÃ§in Ã–zel Stil */
        .final-score-display {
            font-size: 70px;
            font-weight: bold;
            color: #4B5320;
            margin: 10px 0 15px 0; 
        }

        /* BaÅŸlangÄ±Ã§ EkranÄ± Stili */
        #start-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 350px; 
            text-align: center;
        }
        /* CSS Sonu */
    </style>
</head>
<body>

    <div class="container">
        <div class="header-box">
            <h1>OSMANLI TÃœRKÃ‡ESÄ° HARF PEKÄ°ÅTÄ°RME ETKÄ°NLÄ°ÄÄ°</h1>
            <h2>NAZÄ°LLÄ° ANADOLU LÄ°SESÄ° 1.HAFTA - SEFA AKBAÅ</h2>
        </div>

        <div class="info-bar-container">
            <div id="score" class="info-box">Puan: 0</div>
            <div id="timer" class="info-box">SÃ¼re: 01:00</div>
        </div>

        <div id="start-screen" style="display: flex;"> 
            <p style="font-size: 20px; color: #4B5320;">YarÄ±ÅŸmaya baÅŸlamak iÃ§in butona tÄ±klayÄ±nÄ±z. Sesli geri sayÄ±m baÅŸlayacaktÄ±r.</p>
            <button id="start-button" class="start-button">YARIÅMAYI BAÅLAT</button>
        </div>

        <div class="quiz-area" id="quiz-area">
            </div>
    </div>

    <script>
        // JavaScript BaÅŸlangÄ±cÄ±

        // =================================================================
        // SESLER (Yerel Dosyalar KullanÄ±lÄ±yor)
        // =================================================================
        // NOT: Bu dosyalarÄ±n (correct.mp3, wrong.mp3, clock.mp3) HTML dosyasÄ±yla aynÄ± klasÃ¶rde olmasÄ± GEREKÄ°R.
        const audioClock = new Audio('clock.mp3'); 
        const audioCorrect = new Audio('correct.mp3'); 
        const audioWrong = new Audio('wrong.mp3'); 

        // SES AYARI: CLOCK sesini %10 (10'da bir) oranÄ±nda Ã§alsÄ±n.
        audioClock.volume = 0.10; 

        // AnlÄ±k sesleri oynatan genel fonksiyon (Basit Audio nesneleri iÃ§in)
        function playAudio(audioElement, loop = false) {
            audioElement.currentTime = 0; 
            audioElement.loop = loop;
            audioElement.play().catch(e => { console.log("Ses Ã§alÄ±namadÄ± (Autoplay kÄ±sÄ±tlamasÄ± olabilir)."); });
        }

        // =================================================================
        // HARFLER VE EÅLEÅMELER
        // =================================================================
        const rikaHarfler = {
            'Ø§': 'elif', 'Ø¨': 'be', 'Ù¾': 'pe', 
            'Øª': 'te', 
            'Ø«': 'se',
            'Ø¬': 'cim', 
            'Ú†': 'Ã§e', 
            'Ø­': 'ha', 
            'Ø®': 'hÄ±', 
            'Ø¯': 'dal',
            'Ø°': 'zel', 'Ø±': 'ra', 
            'Ø²': 'ze', 'Ú˜': 'je', 'Ø³': 'sin',
            'Ø´': 'ÅŸÄ±n', 
            'Øµ': 'sad', 'Ø¶': 'dad', 'Ø·': 'tÄ±', 'Ø¸': 'zÄ±',
            'Ø¹': 'ayn', 'Øº': 'gayn', 'Ù': 'fe', 'Ù‚': 'kaf', 'Ùƒ': 'kef',
            'Ú¯': 'gef', 'Ú­': 'nef', 'Ù„': 'lam', 
            'Ù…': 'mim', 
            'Ù†': 'nun',
            'Ùˆ': 'vav', 'Ù‡': 'he', 'Ù‰': 'ye'
        };
        const harfList = Object.keys(rikaHarfler);
        const secenekler = ['a', 'b', 'c', 'd', 'e'];
        const totalDuration = 60; // 1 Dakika (60 saniye)
        const harfDuration = 5; // Her harf iÃ§in 5 saniye
        
        let timeLeft = totalDuration;
        let harfTimeLeft = harfDuration;
        let score = 0;
        let currentHarf = '';
        let timerInterval; 
        let harfInterval; 
        let harfTimeout; 

        // DOM Elementleri (Global olarak tanÄ±mlananlar)
        const scoreEl = document.getElementById('score');
        const timerEl = document.getElementById('timer');
        const quizAreaEl = document.getElementById('quiz-area');
        const startScreenEl = document.getElementById('start-screen');
        const startButtonEl = document.getElementById('start-button');
        
        // Dinamik olarak oluÅŸturulan elemanlar iÃ§in placeholder'lar
        let harfEl, harfCountdownBoxEl, harfCountdownEl, choicesContainer, feedbackEl;

        // =================================================================
        // HTML YAPISINI OYUN Ä°Ã‡Ä°NDE OLUÅTURMA
        // =================================================================
        function createQuizElements() {
            // Quiz alanÄ±nÄ±n iÃ§eriÄŸi temizlenir ve Harf/ÅÄ±k/Feedback yapÄ±sÄ± yeniden oluÅŸturulur
            quizAreaEl.innerHTML = `
                <div class="harf-display">
                    <div id="harf-countdown-box">
                        <span id="harf-countdown">5</span>
                    </div>
                    <span id="current-harf"></span>
                </div>

                <div class="choices" id="choices-container"></div>
                <div id="feedback"></div>
            `;
            // Yeni DOM elementlerini atama
            harfEl = document.getElementById('current-harf');
            harfCountdownBoxEl = document.getElementById('harf-countdown-box'); 
            harfCountdownEl = document.getElementById('harf-countdown'); 
            choicesContainer = document.getElementById('choices-container');
            feedbackEl = document.getElementById('feedback');
        }


        // =================================================================
        // ZAMANLAYICI VE OYUN KONTROL
        // =================================================================
        
        function startGameFlow() {
            // BaÅŸlangÄ±Ã§ ekranÄ±nÄ± gizle, quiz elementlerini oluÅŸtur
            startScreenEl.style.display = 'none';
            createQuizElements(); 
            quizAreaEl.style.display = 'flex'; 

            // CLOCK sesini arka planda dÃ¶ngÃ¼ye alarak baÅŸlat
            playAudio(audioClock, true); 
            
            startTimer();
            displayNewHarf();
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    clearInterval(harfInterval);
                    endGame();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerEl.textContent = `SÃ¼re: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // =================================================================
        // HARF GERÄ° SAYIM YÃ–NETÄ°MÄ°
        // =================================================================
        
        function startHarfCountdown() {
            clearInterval(harfInterval); 
            harfTimeLeft = harfDuration;
            harfCountdownEl.textContent = harfTimeLeft;
            
            // EÄŸer saat sesi durmuÅŸsa (oyun baÅŸlatÄ±ldÄ±ÄŸÄ±nda veya yeniden denerken) tekrar baÅŸlat
            if (audioClock.paused) {
                 playAudio(audioClock, true);
            }

            harfInterval = setInterval(() => {
                harfTimeLeft--;
                harfCountdownEl.textContent = harfTimeLeft;
                
                if (harfTimeLeft <= 0) {
                    clearInterval(harfInterval);
                    
                    // Harf kaybolma animasyonu ve feedback
                    harfEl.classList.add('fade-out');
                    harfCountdownBoxEl.style.opacity = '0'; 
                    feedbackEl.innerHTML = '<span class="feedback-text wrong-text">SÃœRE DOLDU!</span>';
                    
                    setTimeout(displayNewHarf, 1000); 
                }
            }, 1000);

            clearTimeout(harfTimeout);
        }

        // =================================================================
        // HARF SEÃ‡Ä°MÄ° VE GÃ–STERÄ°MÄ°
        // =================================================================

        function getRandomItem(arr) {
            return arr[Math.floor(Math.random() * arr.length)];
        }

        function generateChoices(correctHarf) {
            const correctName = rikaHarfler[correctHarf];
            const allNames = Object.values(rikaHarfler).filter(n => n !== correctName);
            
            // 4 YanlÄ±ÅŸ cevap seÃ§imi
            let wrongNames = [];
            while (wrongNames.length < 4) {
                const randomName = getRandomItem(allNames);
                if (!wrongNames.includes(randomName)) {
                    wrongNames.push(randomName);
                }
            }

            const allChoices = [correctName, ...wrongNames];
            
            // ÅÄ±klarÄ± karÄ±ÅŸtÄ±r
            allChoices.sort(() => Math.random() - 0.5); 
            
            // ÅÄ±klarÄ± oluÅŸtur ve ekrana bas
            choicesContainer.innerHTML = '';
            secenekler.forEach((letter, index) => {
                const choiceName = allChoices[index];
                const button = document.createElement('button');
                button.className = 'choice-button';
                
                button.innerHTML = `<span class="choice-letter">${letter})</span> ${choiceName}`; 
                
                button.dataset.name = choiceName;
                button.addEventListener('click', () => {
                    checkAnswer(choiceName, correctName);
                });
                choicesContainer.appendChild(button);
            });
        }

        function displayNewHarf() {
            if (timeLeft <= 0) return;

            clearInterval(harfInterval);
            clearTimeout(harfTimeout);
            
            // AnimasyonlarÄ± sÄ±fÄ±rla ve sayaÃ§ gÃ¶rÃ¼nÃ¼r yap
            harfEl.classList.remove('fade-out');
            harfEl.style.opacity = '1';
            harfEl.style.transform = 'translate(-50%, -20%)'; 
            harfCountdownBoxEl.style.opacity = '1';
            feedbackEl.innerHTML = ''; 

            currentHarf = getRandomItem(harfList);
            harfEl.textContent = currentHarf;
            generateChoices(currentHarf);

            startHarfCountdown();
        }

        // =================================================================
        // CEVAP KONTROLÃœ
        // =================================================================

        function checkAnswer(selectedName, correctName) {
            clearInterval(harfInterval); // Harf geri sayÄ±mÄ±nÄ± durdur
            clearTimeout(harfTimeout); 
            // CLOCK sesi arka planda Ã§almaya devam eder

            // TÃ¼m butonlarÄ± devre dÄ±ÅŸÄ± bÄ±rak
            Array.from(choicesContainer.children).forEach(button => {
                button.disabled = true;
            });

            if (selectedName === correctName) {
                score += 10;
                playAudio(audioCorrect); // DOÄRU SESÄ°NÄ° Ã‡AL
                
                feedbackEl.innerHTML = `
                    <span class="icon correct-text">âœ…</span> 
                    <span class="feedback-text correct-text">DOÄRU! (+10 Puan)</span>
                `;
                
                const correctButton = Array.from(choicesContainer.children).find(b => b.dataset.name === correctName);
                if (correctButton) correctButton.style.backgroundColor = 'green';
            } else {
                playAudio(audioWrong); // YANLIÅ SESÄ°NÄ° Ã‡AL
                
                feedbackEl.innerHTML = `
                    <span class="icon wrong-text">âŒ</span> 
                    <span class="feedback-text wrong-text">YANLIÅ!</span>
                `;

                const wrongButton = Array.from(choicesContainer.children).find(b => b.dataset.name === selectedName);
                if (wrongButton) wrongButton.style.backgroundColor = 'red';
                const correctButton = Array.from(choicesContainer.children).find(b => b.dataset.name === correctName);
                if (correctButton) correctButton.style.backgroundColor = 'green';
            }

            scoreEl.textContent = `Puan: ${score}`;

            // Harf ve sayaÃ§ kaybolma animasyonu
            harfEl.classList.add('fade-out');
            harfCountdownBoxEl.style.opacity = '0';

            // 1 saniye sonra yeni harfe geÃ§
            setTimeout(() => {
                feedbackEl.innerHTML = '';
                // ButonlarÄ± tekrar etkinleÅŸtir (yeni soru iÃ§in)
                Array.from(choicesContainer.children).forEach(button => {
                    button.disabled = false;
                });
                displayNewHarf();
            }, 1000);
        }

        // =================================================================
        // OYUN SONU
        // =================================================================

        function endGame() {
            clearInterval(timerInterval);
            clearInterval(harfInterval);
            clearTimeout(harfTimeout);
            
            // CLOCK SESÄ°NÄ° DURDUR
            audioClock.pause(); 
            audioClock.currentTime = 0;
            
            // Harf ve ÅŸÄ±klarÄ± temizle
            quizAreaEl.innerHTML = ''; // TÃ¼m quiz iÃ§eriÄŸi temizlenir

            let endMessage;
            
            if (score >= 90) { // 9 doÄŸru cevap (9 * 10 = 90 puan)
                endMessage = `
                    <div style="text-align: center; font-size: 24px;">
                        <span class="icon" style="font-size: 40px;">ğŸ†ğŸ¤©</span>
                        <span class="feedback-text correct-text" style="font-size: 30px;">MÃœKEMMEL! TEBRÄ°KLER!</span>
                    </div>
                    <div class="final-score-display">
                        ${score}
                    </div>
                    <span class="feedback-text">Toplam PuanÄ±nÄ±z</span>
                    <button id="restart-button" class="restart-button" onclick="restartGame()">YENÄ°DEN DENE</button>
                `;
                playAudio(audioCorrect); 
            } else {
                endMessage = `
                    <div style="text-align: center; font-size: 24px;">
                        <span class="icon correct-text">ğŸŒŸ</span>
                        <span class="feedback-text">ETKÄ°NLÄ°K SONA ERDÄ°!</span>
                    </div>
                    <div class="final-score-display">
                        ${score}
                    </div>
                    <span class="feedback-text">Toplam PuanÄ±nÄ±z</span>
                    <button id="restart-button" class="restart-button" onclick="restartGame()">YENÄ°DEN DENE</button>
                `;
                playAudio(audioCorrect); 
            }

            // Oyun sonu iÃ§eriÄŸi quiz-area'nÄ±n iÃ§ine ortalanmÄ±ÅŸ olarak yerleÅŸtirilir.
            quizAreaEl.innerHTML = endMessage;
            quizAreaEl.style.display = 'flex'; 
        }

        // =================================================================
        // OYUNU YENÄ°DEN BAÅLATMA
        // =================================================================

        function restartGame() {
            // DeÄŸiÅŸkenleri sÄ±fÄ±rla
            timeLeft = totalDuration;
            score = 0;
            currentHarf = '';

            // Ã–nceki oyun durumunu temizle
            clearInterval(timerInterval);
            clearInterval(harfInterval);
            clearTimeout(harfTimeout);
            
            // EkranlarÄ± sÄ±fÄ±rla
            scoreEl.textContent = `Puan: 0`;
            updateTimerDisplay(); 
            
            // Yeni oyunu baÅŸlat
            startGameFlow();
        }

        // =================================================================
        // BAÅLANGIÃ‡
        // =================================================================

        document.addEventListener('DOMContentLoaded', () => {
            // Sayfa yÃ¼klenince sadece zamanÄ± gÃ¶ster (BaÅŸlangÄ±Ã§ ekranÄ± gÃ¶rÃ¼nÃ¼r)
            updateTimerDisplay(); 
            
            // BaÅŸlat butonuna tÄ±klandÄ±ÄŸÄ±nda oyun akÄ±ÅŸÄ±nÄ± baÅŸlat
            startButtonEl.addEventListener('click', startGameFlow);
        });
        // JavaScript Sonu
    </script>

</body>
</html>